<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Workshop Gratuito - Sistema de Ventas con IA</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      line-height: 1.6;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }
    .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
    .hero { min-height: 100vh; display: flex; align-items: center; position: relative; overflow: hidden; }
    .hero::before {
      content: ''; position: absolute; inset: 0;
      background: rgba(0,0,0,0.3); z-index: 1;
    }
    .hero-content {
      display: grid; grid-template-columns: 1fr 1fr; gap: 60px; align-items: center;
      position: relative; z-index: 2;
    }
    .hero-text { color: white; }
    .hero h1 {
      font-size: 3.5rem; font-weight: 800; line-height: 1.1; margin-bottom: 24px;
      background: linear-gradient(135deg, #ffffff 0%, #f0f8ff 100%);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
    }
    .hero h2 { font-size: 1.5rem; font-weight: 400; margin-bottom: 40px; opacity: .9; line-height: 1.4; }
    .benefits { list-style: none; margin-bottom: 40px; }
    .benefits li { display: flex; align-items: flex-start; margin-bottom: 20px; font-size: 1.1rem; opacity: .95; }
    .benefits li::before { content: '‚ú®'; margin-right: 12px; font-size: 1.2rem; margin-top: 2px; }
    .form-container {
      background: rgba(255,255,255,.95); -webkit-backdrop-filter: blur(20px); backdrop-filter: blur(20px);
      border-radius: 24px; padding: 40px; box-shadow: 0 20px 60px rgba(0,0,0,.3);
      border: 1px solid rgba(255,255,255,.2);
      transition: transform .2s ease;
    }
    .form-header { text-align: center; margin-bottom: 32px; }
    .form-header h3 { font-size: 1.8rem; font-weight: 700; color: #2d3748; margin-bottom: 8px; }
    .form-header p { color: #4a5568; font-size: 1rem; }
    .form-group { margin-bottom: 24px; }
    .form-group label { display: block; margin-bottom: 8px; font-weight: 600; color: #2d3748; font-size: .95rem; }
    .form-group input {
      width: 100%; padding: 16px 20px; border: 2px solid #e2e8f0; border-radius: 12px; font-size: 1rem;
      transition: all .3s ease; background: white;
    }
    .form-group input:focus {
      outline: none; border-color: #667eea; box-shadow: 0 0 0 3px rgba(102,126,234,.1);
      transform: translateY(-1px);
    }
    .cta-button {
      width: 100%; background: #1e3a8a; color: white; border: none; padding: 18px 32px; font-size: 1.1rem; font-weight: 700;
      border-radius: 12px; cursor: pointer; transition: all .3s ease; text-transform: uppercase; letter-spacing: .5px; margin-top: 16px;
    }
    .cta-button:hover { background: #1e40af; transform: translateY(-2px); box-shadow: 0 12px 40px rgba(30,58,138,.4); }
    .cta-button:active { transform: translateY(0); }
    .trust-indicators {
      display: flex; justify-content: center; gap: 32px; margin-top: 32px; padding-top: 24px; border-top: 1px solid #e2e8f0;
    }
    .trust-item { text-align: center; color: #4a5568; font-size: .9rem; }
    .trust-item .number { font-size: 1.5rem; font-weight: 700; color: #667eea; display: block; }
    @media (max-width: 768px) {
      .hero-content { grid-template-columns: 1fr; gap: 40px; text-align: center; }
      .hero h1 { font-size: 2rem; }
      .hero h2 { font-size: 1.2rem; }
      .form-container { padding: 24px; }
      .trust-indicators { flex-direction: column; gap: 16px; }
    }
    .hero-text > * { opacity: 1; }
    .form-container { opacity: 1; }
  </style>
</head>
<body>
  <section class="hero">
    <div class="container">
      <div class="hero-content">
        <div class="hero-text">
          <h1>Aprende a construir un sistema de ventas con IA y cerrar m√°s en menos tiempo</h1>
          <h2>Workshop gratuito donde te ense√±ar√© c√≥mo combinar 7 herramientas para escalar ventas sin a√±adir headcount.</h2>
          <ul class="benefits">
            <li>Descubrir√°s cu√°les herramientas encajan m√°s con tu modelo de negocio.</li>
            <li>Ver√°s casos reales de personalizaci√≥n masiva con IA.</li>
            <li>Aprender√°s a acortar el ciclo de ventas con datos en tiempo real.</li>
          </ul>
        </div>

        <div class="form-container">
          <div class="form-header">
            <h3>Reserva tu plaza</h3>
            <li>27 de Agosto a las 19h CEST / 12h CST</li>
            <p>Workshop 100% gratuito y en vivo</p>
          </div>

          <!-- REAL FORM -->
          <form id="workshopForm" novalidate>
            <div class="form-group">
              <label for="nombre">Nombre *</label>
              <input type="text" id="nombre" name="nombre" required placeholder="Tu nombre completo" />
            </div>
            <div class="form-group">
              <label for="email">Email *</label>
              <input type="email" id="email" name="email" required placeholder="tu@email.com" />
            </div>
            <div class="form-group">
              <label for="empresa">Empresa *</label>
              <input type="text" id="empresa" name="empresa" required placeholder="Nombre de tu empresa" />
            </div>
            <button type="submit" class="cta-button" id="submitButton">Reservar mi plaza</button>
          </form>

          <div class="trust-indicators">
            <div class="trust-item">
              <span class="number">+20</span> Empresarios
            </div>
            <div class="trust-item">
              <span class="number">100%</span> Gratuito
            </div>
            <div class="trust-item">
              <span class="number">45 min</span> Duraci√≥n
            </div>
            <div class="trust-item">
              <span class="number">1</span> Gu√≠a descargable
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- EmailJS SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  <script>
    // Inicializa EmailJS
    (function () {
      emailjs.init("oJQ4vAKskjILyvDNN"); // Public key
    })();

    // Utilidades
    function validateEmail(email) {
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    }

    function showSuccessMessage() {
      // Evita duplicados
      if (document.getElementById('success-box')) return;

      const successHTML = `
        <div id="success-box" style="background:#f0f9ff;border:2px solid #0ea5e9;border-radius:12px;padding:20px;margin-top:20px;text-align:center;">
          <h4 style="color:#0c4a6e;margin-bottom:12px;">¬°Registro Exitoso! üéâ</h4>
          <p style="color:#0369a1;margin-bottom:16px;">Tu plaza ha sido reservada. En breve recibir√°s:</p>
          <ul style="color:#0369a1;text-align:left;margin-bottom:16px;padding-left:20px;">
            <li>Email de confirmaci√≥n con detalles del workshop</li>
            <li>Lista completa de las 7 herramientas que veremos</li>
            <li>Link de acceso al evento en vivo</li>
          </ul>
          <p style="color:#0c4a6e;font-weight:600;">¬°Nos vemos en el workshop! üöÄ</p>
        </div>
      `;
      document.querySelector('.form-container').insertAdjacentHTML('beforeend', successHTML);
    }

    async function sendToGoogleSheets(data) {
      const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwJj8ctg33as1W4IwiKwdEHOjPRKZEm0QVcF5Brol8_V4v5v_Y1Z9XoWNioCYoSmLz5Ug/exec';
      try {
        // no-cors => respuesta opaca; se asume √©xito si no lanza error de red
        await fetch(GOOGLE_SCRIPT_URL, {
          method: 'POST',
          mode: 'no-cors',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            ...data,
            timestamp: new Date().toISOString(),
            source: 'landing_page'
          })
        });
        return { ok: true };
      } catch (err) {
        console.error('Error sending to Google Sheets:', err);
        // No interrumpimos el flujo por este fallo
        return { ok: false, error: err };
      }
    }

    async function sendConfirmationEmail(data) {
      const EMAILJS_SERVICE_ID = 'service_khe0vlg';
      const EMAILJS_TEMPLATE_ID = 'template_12345';
      const emailData = {
        to_name: data.nombre,
        to_email: data.email,
        empresa: data.empresa,
        website_url: 'https://ivgrowth.com',
        linkedin_url: 'https://linkedin.com/company/ivgrowth',
        unsubscribe_url: 'https://ivgrowth.com/unsubscribe'
      };
      return emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_ID, emailData);
    }

    // Manejo del formulario
    document.addEventListener('DOMContentLoaded', function () {
      const form = document.getElementById('workshopForm');
      const button = document.getElementById('submitButton');

      form.addEventListener('submit', async function (e) {
        e.preventDefault();

        const formData = new FormData(form);
        const data = {
          nombre: (formData.get('nombre') || '').trim(),
          email: (formData.get('email') || '').trim(),
          empresa: (formData.get('empresa') || '').trim()
        };

        if (!data.nombre || !data.email || !data.empresa) {
          alert('Por favor, completa todos los campos.');
          return;
        }
        if (!validateEmail(data.email)) {
          alert('Por favor, introduce un email v√°lido.');
          return;
        }

        const originalText = button.textContent;
        button.textContent = 'Procesando...';
        button.disabled = true;

        try {
          await Promise.all([
            sendToGoogleSheets(data),
            sendConfirmationEmail(data)
          ]);

          button.textContent = '¬°Plaza reservada! ‚úì';
          button.style.background = '#48bb78';
          showSuccessMessage();

          setTimeout(() => {
            form.reset();
            button.textContent = originalText;
            button.disabled = false;
            button.style.background = '';
          }, 4000);
        } catch (error) {
          console.error('Error processing registration:', error);
          alert('Hubo un problema al procesar tu registro. Por favor, int√©ntalo de nuevo o cont√°ctanos directamente.');

          // Si fall√≥ el email pero probablemente guardamos en Sheets, muestra √©xito parcial
          if (String(error?.message || '').toLowerCase().includes('email')) {
            showSuccessMessage();
            alert('Tu registro fue guardado, pero hubo un problema enviando el email de confirmaci√≥n. Te contactaremos pronto.');
          }

          button.textContent = originalText;
          button.disabled = false;
          button.style.background = '';
        }
      });

      // Animaci√≥n flotante suave siguiendo el rat√≥n
      let mouseX = 0, mouseY = 0;
      document.addEventListener('mousemove', (e) => { mouseX = e.clientX; mouseY = e.clientY; });
      const formContainer = document.querySelector('.form-container');
      if (formContainer) {
        setInterval(() => {
          const rect = formContainer.getBoundingClientRect();
          const centerX = rect.left + rect.width / 2;
          const centerY = rect.top + rect.height / 2;
          const deltaX = (mouseX - centerX) * 0.01;
          const deltaY = (mouseY - centerY) * 0.01;
          formContainer.style.transform = `translate(${deltaX}px, ${deltaY}px)`;
        }, 100);
      }
    });
  </script>
</body>
</html>
